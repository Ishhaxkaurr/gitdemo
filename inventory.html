<!DOCTYPE Html>


<html>
    <head>
        <title> Seller Website  </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    </head>
    <body>
        <h2>General Store Seller Dashboard</h2>
        <div class="container">
            <form id="seller-form">
                <br>
                
                <label for="itemname" class="form-label">Item Name:</label>
                <input type="text" class="form-control" id="itemname">
                <label for="Description" class="form-label">Description:</label>
                <input type="text" class="form-control" id="Description">
                <label for="Sellingprice" class="form-label">SellingPrice:</label>
                <input type="number" class="form-control" id="Sellingprice">
                <label for="quantity" class="form-label">Quantity:</label>
                <input type="number" class="form-control" id="Quantity">
                    
               
                </br>
                <input class="btn btn-primary" type="submit" value="Add Product">


            </form>
        </div> 
        <br>
        <ul id="products" class="fw-bolder">PRODUCTS:<br></ul>
        
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            const myform= document.getElementById('seller-form');
            const Sellingprice= document.getElementById('Sellingprice');
            const itemname= document.getElementById('itemname');
            const Description= document.getElementById('Description');
            const Quantity= document.querySelector('#Quantity')

            myform.addEventListener('submit', addProduct);

        function addProduct(e){
            
            if(itemname.value== '' || Description.value== '' || Sellingprice.value=='' ||  Quantity.value=='' ){
                alert('Please fill all the details')
            }
            

            else{
                e.preventDefault();
                const productDetails= {

                    itemname: itemname.value,
                    Description: Description.value,
                    Sellingprice: Sellingprice.value,
                    Quantity: Quantity.value

                }

                axios.post('https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement', productDetails)
                .then((response)=>{
                    ShowProductonScreen(response.data)
                })
                .catch((err)=>{
                    console.log(err)
                })
                itemname.value ='';
                Description.value ='';
                Sellingprice.value ='';
                Quantity.value ='';
                
            }
        }

            window.addEventListener("DOMContentLoaded", ()=>{
                axios.get('https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement')
                .then((response)=>{
                    console.log(response);
                    for(var i=0; i<response.data.length; i++){
                        ShowProductonScreen(response.data[i]);
                    }
                })
                .catch((err)=>{
                    console.log(err)
                })
            })

            function ShowProductonScreen(product){

                const parentNode = document.getElementById('products');
                const childHTML = `<li id=${product._id} class="fw-normal"> ${product.itemname} - ${product.Description} - ${product.Sellingprice} -  ${product.Quantity}<br>
                    <button  class="btn btn-success btn-sm" onClick=updatequantity1"${product.Quantity}">Buy one</button>
                    <button class="btn btn-danger btn-sm" onClick=updatequantity2"${product.Quantity}">Buy two</button>
                    <button class="btn btn-primary btn-sm" onClick=updatequantity3"${product.Quantity}">Buy three</button>
                    </li>`
                    parentNode.innerHTML = parentNode.innerHTML + childHTML;
                
                }

                const updatequantity1 = (Quantity) => {
                    
                    axios.put(`https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement/${product.Quantity}`)
                    .then((response)=>{
                        

                        product.Quantity+=1;
                        
                        alert('Please fill all the details')
                        
                })
                .catch((err)=>{
                    console.log(err)
                })
    
                  
                }
            
                const updatequantity2 = (Quantity) => {
                    
                    axios.put(`https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement/${product.Quantity}`)
                    .then((response)=>{
                        product.Quantity+=2;
                        console.log("quantity increased by 2") 
                })
                .catch((err)=>{
                    console.log(err)
                })
    
                  
                }
                const updatequantity3 = (Quantity) => {
                    
                    axios.put(`https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement/${product.Quantity}`)
                    .then((response)=>{
                        product.Quantity+=3;

                        console.log("quantity increased by 3") 
                })
                .catch((err)=>{
                    console.log(err)
                })
    
                  
                }
            
            function deleteProduct(productId){
                
                axios.delete(`https://crudcrud.com/api/e9542ef35372492180df7ae0429034b2/InventoryManagement/${productId}`)
                .then((response)=>{
                    
                    removeProductfromScreen(productId)
                })
                .catch((err)=>{
                    console.log(err)
                })

            }
            function removeProductfromScreen(productId){
                const parentNode = document.getElementById('products');
                const deleteChild = document.getElementById(productId);
                if(deleteChild){
                    parentNode.removeChild(deleteChild);
                }
            }

        

     </script>
    </body>
    </html>
